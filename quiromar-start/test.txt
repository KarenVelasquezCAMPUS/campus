-- Crea la base de datos
CREATE DATABASE clay_bioseguridad;

-- Usa la base de datos
USE clay_bioseguridad;


-- Crea tabla de Insumo ID

	CREATE TABLE insumo (
		insumo_id INT(11) PRIMARY KEY,
		nombre VARCHAR(50),
		valor_unitario DOUBLE,
		stock_min DOUBLE,
		stock_max DOUBLE		
	);

-- Crea tabla Insumo de Prendas
	
	CREATE TABLE insumo_prendas (	
		cantidad INT(11),
		insumo_id INT(11),
		FOREIGN KEY (insumo_id) REFERENCES insumo (insumo_id),
		prenda_id INT(11),
		FOREIGN KEY (prenda_id) REFERENCES prenda (prenda_id),
	);

-- Crea tabla Inventario ID
	
	CREATE TABLE inventario (
		inventario_id INT(11) PRIMARY KEY,
		codigo_inventario VARCHAR(255),
		valor_venta_cop DOUBLE,
		valor_venta_usd DOUBLE,
		prenda_id INT(11),
		FOREIGN KEY (prenda_id) REFERENCES prenda (prenda_id),}
	);

-- Crea tabla Prenda ID

	CREATE TABLE prenda (
		prenda_id INT(11) PRIMARY KEY,
		nombre VARCHAR(50),
		valor_unitario_cop DOUBLE,
		valor_unitario_usd DOUBLE,
		tipo_proteccion_id INT(11),
		estado_id INT(11),
		FOREIGN KEY (estado_id) REFERENCES estado (estado_id),
		genero_id INT(11),
		FOREIGN KEY (genero_id) REFERENCES genero (genero_id),
		codigo VARCHAR(50)
	); 


-- Crea tabla Tipo Proteccion ID
	
	CREATE TABLE tipo_proteccion (
		tipo_proteccion_id INT(11) PRIMARY KEY,
		descripcion VARCHAR(50)
	);

-- Crea tabla Inventario Talla 
	
	CREATE TABLE inventario_talla (
		inventario_id INT(11),
		FOREIGN KEY (inventario_id) REERENCES inventario (inventaro_id),
		talla_id INT(11),
		FOREIGN KEY (talla_id) REFERENCES talla (talla_id)
	);

-- Crea tabla Color ID

	CREATE TABLE color (
		color_id INT(11) PRIMARY KEY,
		descripcion VARCHAR(50)
	);

-- Crea tabla Talla ID
	
	CREATE TABLE talla (
		talla_id INT(11) PRIMARY KEY,
		descripcion VARCHAR(50)
	);

-- Crea tabla Estado ID

	CREATE TABLE estado (
		estado_id INT(11) PRIMARY KEY,
		descripcion VARCHAR(50),
		tipo_estado_id INT(11),
		FOREIGN KEY(tipo_estado_id) REFERENCES tipo_estado (tipo_estado_id)
	);

-- Crea tabla Tipo Estado ID
	
	CREATE TABLE tipo_estado (
		tipo_estado_id INT(11) PRIMARY KEY,
		descripcion VARCHAR(50)
	);

-- Crea tabla Detalle Venta ID

	CREATE TABLE detalle_venta (
		detalle_venta_id INT(11) PRIMARY KEY,
		cantidad INT(11),
		valor_unitario DOUBLE,
		venta_id INT(11),
		FOREIGN KEY (venta_id) REFERENCES venta (venta_id);
		producto_id INT(11),
		FOREIGN KEY (producto_id) REFERENCES producto (producto_id).
		talla_id INT(11),
		FOREIGN KEY (talla_id) REFERENCES talla (talla_id)
	);

-- Crea tabla Forma de Pago ID

	CREATE TABLE forma_pago (
		forma_pago_id INT(11) PRIMARY KEY,
		descripcion VARCHAR(50)
	);

-- Crea tabla Insumo Proveedor 
	
	CREATE TABLE insumo_proveedor (
		insumo_id INT(11),
		FOREIGN KEY (insumo_id) REFERENCES insumo (insumo_id),
		proveedor_id INT(11),
		FOREIGN KEY (proveedor_id) REFERENCES proveedor (proveedor_id),
	);

-- Crea tabla Genero ID

	CREATE TABLE genero (
		genero_id INT(11) PRIMARY KEY,
		descripcion VARCHAR(50)
	);

-- Crea tabla Detalle Orden ID

	CREATE TABLE detalle_orden (
		detalle_orden_id INT(11) PRIMARY KEY,
		cantidad_producir INT(11),
		cantidad_producida INT(11),
		orden_id INT(11),
		FOREIGN KEY (orden_id) REFERENCES orden (orden_id),
		prenda_id INT(11),
		FOREIGN KEY (prenda_id) REFERENCES prenda (prenda_id),
		color_id INT(11),
		FOREIGN KEY (color_id) REFERENCES color (color_id),
		estado_id INT(11),
		FOREIGN KEY (estado_id) REFERENCES estado (estado_id)
	);

-- Crea tabla Empresa ID
	
	CREATE TABLE empresa (
		empresa_id INT(11) PRIMARY KEY,
		nit VARCHAR(50),
		razon_social TEXT,
		repesentante_legal VARCHAR(50),
		fecha_creacion DATE,
		municipio_id INT(11),
		FOREIGN KEY (municipio_id) REFERENCES municipio (municipio_id)
	);
		
-- Crea tabla Venta ID

	CREATE TABLE venta (
		venta_id INT(11) PRIMARY KEY,
		fecha DATE;
		empleado_id INT(11),
		FOREIGN KEY (empleado_id) REFERENCES empleado (empleado_id)
		cliente_id INT(11),
		FOREIGN KEY (cliente_id) REFERENCES cliente (cliente_id),
		forma_pago_id INT(11),
		FOREIGN KEY (forma_pago_id) REFERENCES forma_pago (forma_pago_id)
	);


-- Crea tabla Empleado ID

	CREATE TABLE empleado (
		empleado_id INT(11) PRIMARY KEY,
		nombre 	VARCHAR(50),
		fecha_ingreso DATE,
		cargo_id INT(11),
		FOREIGN KEY (cargo_id) REFERENCES cargo (cargo_id),
		municipio_is INT(11),
		FOREIGN KEY (municipio_id) REFERENCES municipio (municipio_id)
	);
		
-- Crea tabla Cargo ID

	CREATE TABLE cargo (
		descripcion VARCHAR(50),
		sueldo_base DOUBLE
	);
		
-- Crea tabla Orden ID

	CREATE TABLE orden (
		fecha DATE,
		empleado_id INT(11),
		FOREIGN KEY (empleado_id) REFERENCES empleado (empleado_id),
		cliente_id INT(11),
		FOREIGN KEY (cliente_id) REFERENCES cliente (cliente_id),
		estado_id INT(11),
		FOREIGN KEY (estado_id) REFERENCES estado (estado_id)
	);
